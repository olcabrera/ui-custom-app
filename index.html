<!-- <!DOCTYPE html>
<html lang="es"> -->
<head>
    <title>App Selection</title>
    <meta charset="UTF-8">
    <link href="apps.css" type="text/css" rel="stylesheet">
    <link href="tabs.css" type="text/css" rel="stylesheet">
    <link href="inputs_designe.css" type="text/css" rel="stylesheet">
    <script src="mqttws31.min.js"></script>
    <script src="mqtt_client.js"></script>
    <script src="index.js"></script>
    <script src="../base1/cockpit.js"></script>
    <script src="jquery.js" type="text/javascript"></script>
    <script src="files.js" type="text/javascript"></script>

</head>
<body class="pf-m-redhat-font">
    <div class="ct-page-fill">
        <div class="pf-c-page">    
            <main class="pf-c-page__main" tabindex="-1">
                <section class="pf-c-page__main-section pf-m-light">
                <h2 style="text-align: center;">Custom App Selection</h2>
                <!-- <p>Select custom apps to install</p> -->
                <br>
                <hr>
                <br>
                </section>
                <section>
                <article>
                    <div class="pdp-tabs">
                        <input id="tab-one" type="radio" name="grp" checked />
                        <input id="tab-two" type="radio" name="grp" />
                        <input id="tab-three" type="radio" name="grp" />

                        <div class="tab-labels">
                            <label for="tab-one">Select</label>
                            <label for="tab-two">Active</label>
                            <label for="tab-three">Downloading</label>
                        </div>

                        <!-- <input id="tab-one"  type="radio" name="grp" checked="checked" /> -->
                        <!-- <label for="tab-one">Select</label> -->
                        <div class="tab-content tab-one">
                            <h1>Select Custom Apps</h1>
                            <!-- <div id="app-lista" class="pf-c-page__main-section"> -->
                            <section class="pf-c-page__main-section">
                                <div class="pf-l-gallery pf-m-gutter">
                                    <article id="adu-provision" class="pf-c-card">
                                        <div class="pf-l-flex pf-m-align-items-center">
                                            <div class="pf-c-card__body">
                                                  
                                                <div style="display: flex; justify-content: flex-end; align-items: left; margin-bottom: 10px;">
                                                    <button class="pf-c-button pf-m-plain" id="refresh-button" aria-label="Refresh">
                                                        <!-- <button class="pf-c-button pf-m-plain" id="refresh-button" aria-label="Refresh"> -->
                                                            <svg class="icon-refresh" xmlns="http://www.w3.org/2000/svg"
                                                                 fill="none" viewBox="0 0 24 24"
                                                                 stroke-width="1.5" stroke="currentColor">
                                                              <path stroke-linecap="round" stroke-linejoin="round"
                                                                    d="M19.5 12c0-1.232-.046-2.453-.138-3.662
                                                                       a4.006 4.006 0 0 0-3.7-3.7
                                                                       48.678 48.678 0 0 0-7.324 0
                                                                       a4.006 4.006 0 0 0-3.7 3.7
                                                                       c-.017.22-.032.441-.046.662
                                                          
                                                                       M19.5 12l3-3m-3 3-3-3
                                                          
                                                                       m-12 3c0 1.232.046 2.453.138 3.662
                                                                       a4.006 4.006 0 0 0 3.7 3.7
                                                                       48.656 48.656 0 0 0 7.324 0
                                                                       a4.006 4.006 0 0 0 3.7-3.7
                                                                       c.017-.22.032-.441.046-.662
                                                          
                                                                       M4.5 12l3 3m-3-3-3 3" />
                                                            </svg>
                                                          <!-- </button> -->
                                                          

                                                    </button>
                                                  </div>
                                                  
                                                <div id="app-lista" class="pf-l-stack"></div>

                                                <div style="text-align: center; margin-top: 20px;">
                                                    
                                                    <button class="pf-c-button pf-m-primary" id="apply-button">Apply</button>
                                                </div>

                                                <div class="config-file-section">
                                                    <h2 class="config-title">Config File</h2>
                                                    <div class="config-buttons">
                                                      <button class="pf-c-button pf-m-primary" id="download-button">Download</button>
                                                      <button class="pf-c-button pf-m-primary" id="upload-button">Upload</button>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                            
                                        </div>
                                        
                                    </article>
                                    <br>
                                    <br> 
                                </div>
                            </section>
                        </div>

                        <div class="tab-content tab-two">

                        <!-- <input id="tab-two" type="radio" name="grp" />
                        <label for="tab-two">Active</label>
                        <div class="pdp-tab-content"> -->
                            <h1>Custom apps Active</h1>
                            <section class="pf-c-page__main-section">
                                <div class="pf-l-gallery pf-m-gutter">
                                    <article id="adu-provision" class="pf-c-card">
                                        <div class="pf-l-flex pf-m-align-items-center">
                                            <section class="pf-c-page__main-section">
                                                <!-- <h2>Lista de Resultados</h2> -->
                                                <div id="resultado-lista" class="pf-c-list"></div>
                                            </section>
                                        </div>
                                    </article>
                                    <br> 
                                </div>
                            </section>
                        </div>


                        <!-- <input id="tab-three" type="radio" name="grp" />
                        <label for="tab-three">Downloading</label> -->
                        <div class="tab-content tab-three">
                            <h1>Downloaded</h1>
                            <section class="pf-c-page__main-section">
                                <div class="pf-l-gallery pf-m-gutter">
                                    <article id="adu-provision" class="pf-c-card">
                                        <div class="pf-l-flex pf-m-align-items-center">
                                            <div class="pf-c-card__body"> 
                                                <div class="pf-l-stack__item">
                                    
                                                </div>
                                                <br>
                                                
                                            </div>
                                        </div>
                                    </article>
                                    <br> 
                                </div>
                            </section>
                        </div>
                    </div>
                </article>
                </section>
            </main>
        </div>
    </div>
    <script src="index.js"></script>
</body>
</html>
                
    <!-- <div id="app">
        <div class="item">
            <input type="checkbox" class="toggle" id="app1" checked>
            <label for="app1">storeops-custom-application</label>
            <select class="dropdown">
                <option>v1.0.0</option>
                <option>v1.1.0</option>
                <option>v1.2.0</option>
            </select>
        </div>
        <div class="item">
            <input type="checkbox" class="toggle" id="app2">
            <label for="app2">onvif-custom-application</label>
            <select class="dropdown">
                <option>v2.1.22</option>
                <option>v2.2.0</option>
                <option>v2.3.1</option>
            </select>
        </div>
    </div>

    <button class="apply" onclick="saveSelection()">Apply</button> -->

    <script>
        function saveSelection() {
            const items = document.querySelectorAll('.item');
            let data = [];

            items.forEach(item => {
                const toggle = item.querySelector('.toggle');
                const label = item.querySelector('label').innerText;
                const dropdown = item.querySelector('.dropdown');
                
                data.push({
                    name: label,
                    enabled: toggle.checked,
                    version: dropdown.value
                });
            });

            fetch('/save-selection', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => alert('Datos guardados exitosamente!'))
            .catch(error => console.error('Error:', error));
        }
    </script>
    </body>
    </html>
